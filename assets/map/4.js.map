{"version":3,"sources":["webpack:///./src/views/system/role.vue","webpack:///src/views/system/role.vue","webpack:///./src/views/system/role.vue?c48c","webpack:///./src/views/system/role.vue?5184","webpack:///./src/views/system/role.vue?f681"],"names":["component","Object","_node_modules_vue_loader_lib_runtime_componentNormalizer_js__WEBPACK_IMPORTED_MODULE_3__","_role_vue_vue_type_script_lang_js__WEBPACK_IMPORTED_MODULE_1__","_role_vue_vue_type_template_id_29cb4788__WEBPACK_IMPORTED_MODULE_0__","__webpack_exports__","data","_this2","this","currentRow","roleName","addFormRules","name","validator","rule","value","callback","re","RegExp","console","log","test","length","Error","trim","para","$http","url","method","then","res","editLoading","flag","trigger","required","description","max","message","editFormRules","editForm","data2","defaultProps","children","label","auths","ids","authIds","roleId","addItem","authName","authCode","editItem","groups","roles","listLoading","sels","perCheck","editFormVisible","addItemLoading","addItemVisible","dialogVisible","editItemLoading","editItemVisible","permissionVisible","permissionLoading","modelVisible","modelLoading","defaultProps1","data3","modelTree","directory","permission","addFormVisible","addLoading","addForm","roleTree","methods","nodeRender","h","_ref","_this3","node","minWidth","store","level","parentId","style","maxWidth","class","attrs","title","aria-hidden","xlink:href","_babelHelperVueJsxMergeProps2","default","mode","on","input","$$v","directives","size","type","icon","click","modeClear","modelAuth","index","row","id","temp","directoryAuth","forEach","x","push","directory_id","setMode","selsChange","handleCurrentChange","val","getCheckedNodes","$refs","tree","setCheckedNodes","nodes","getRoles","_this","post","response","role","catch","error","getGroups","group","handleDel","_this4","$message","$confirm","closeOnClickModal","modelAuthSubmit","_this5","msg","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","_getIterator3","next","done","a","f","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","b","err","return","getDirectoryTree","directoryTree","handleEdit","_assign2","handleAdd","handlePermission","auth_id","editSubmit","_this6","validate","valid","resetFields","permissionSubmit","_this7","permissionForm","addSubmit","_this8","dateFormatter","column","createDate","_util2","formatDate","format","Date","mounted","_node_modules_babel_loader_lib_index_js_node_modules_vue_loader_lib_index_js_vue_loader_options_role_vue_vue_type_script_lang_js__WEBPACK_IMPORTED_MODULE_0___default","render","_vm","_h","$createElement","_c","_self","staticClass","staticStyle","height","inline","_v","disabled","width","highlight-current-row","current-change","prop","min-width","sortable","scopedSlots","_u","key","fn","scope","_s","formatter","slot","font-size","text-align","color","$event","$index","visible","close-on-click-modal","update:visible","ref","model","label-width","rules","auto-complete","$set","expression","autosize","minRows","maxRows","placeholder","nativeOn","loading","_e","show-close","show-checkbox","node-key","highlight-current","props","default-checked-keys","default-expand-all","expand-on-click-node","render-content","staticRenderFns"],"mappings":"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","file":"assets/js/chunks/4.680643396465bc8e7f5c.js","sourcesContent":["import { render, staticRenderFns } from \"./role.vue?vue&type=template&id=29cb4788\"\nimport script from \"./role.vue?vue&type=script&lang=js\"\nexport * from \"./role.vue?vue&type=script&lang=js\"\nimport style0 from \"./role.vue?vue&type=style&index=0&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\r\n  <section class=\"role-view\">\r\n    <!--工具条-->\r\n    <!-- <el-col :span=\"24\" class=\"toolbar\" style=\"padding-bottom: 0px;\"> -->\r\n    <el-form :inline=\"true\"\r\n      style=\"height:50px;\">\r\n      <el-form-item>\r\n        <el-button size=\"small\"\r\n          type=\"primary\"\r\n          @click=\"handleAdd\">新建\r\n          <i class=\"el-icon-plus el-icon--right\"></i>\r\n        </el-button>\r\n        <el-button size=\"small\"\r\n          @click=\"handleEdit\"\r\n          :disabled=\"this.currentRow===null\">编辑\r\n          <i class=\"el-icon-edit el-icon--right\"></i>\r\n        </el-button>\r\n        <el-button type=\"danger\"\r\n          size=\"small\"\r\n          @click=\"handleDel\"\r\n          :disabled=\"this.currentRow===null\">删除\r\n          <i class=\"el-icon-delete el-icon--right\"></i>\r\n        </el-button>\r\n      </el-form-item>\r\n    </el-form>\r\n\r\n    <!-- </el-col> -->\r\n    <hr/>\r\n\r\n    <!--列表-->\r\n    <el-table :data=\"roles\"\r\n      highlight-current-row\r\n      style=\"width: 100%;\"\r\n      height=\"100%\"\r\n      @current-change=\"handleCurrentChange\">\r\n      <!--   <el-table-column type=\"selection\" width=\"55\">\r\n      </el-table-column> -->\r\n\r\n      <el-table-column type=\"index\"\r\n        width=\"60\">\r\n      </el-table-column>\r\n      <el-table-column prop=\"name\"\r\n        label=\"名称\"\r\n        min-width=\"120\"\r\n        sortable>\r\n        <template slot-scope=\"scope\">\r\n          <span style=\"min-width:120px\"\r\n            v-bind:title=\"scope.row.name\"\r\n            class=\"tableEllipsis\">{{ scope.row.name }}</span>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column prop=\"createDate\"\r\n        label=\"创建时间\"\r\n        min-width=\"160\"\r\n        sortable\r\n        :formatter=\"dateFormatter\">\r\n      </el-table-column>\r\n      <el-table-column prop=\"description\"\r\n        label=\"描述\"\r\n        min-width=\"160\"\r\n        sortable>\r\n        <template slot-scope=\"scope\">\r\n          <span style=\"min-width:160px\"\r\n            v-bind:title=\"scope.row.description\"\r\n            class=\"tableEllipsis\">{{ scope.row.description }}</span>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column label=\"操作\"\r\n        width=\"200\">\r\n        <template slot-scope=\"scope\">\r\n          <!--    <el-button size=\"small\" type=\"primary\"  @click=\"handlePermission(scope.$index, scope.row)\">分配权限</el-button>\r\n -->\r\n          <el-dropdown>\r\n            <el-button type=\"primary\"\r\n              size=\"small\">\r\n              选项\r\n              <i class=\"el-icon-caret-bottom el-icon--right\"></i>\r\n            </el-button>\r\n            <el-dropdown-menu slot=\"dropdown\">\r\n\r\n              <el-dropdown-item style=\"width: inherit;\">\r\n\r\n                <div @click=\"handlePermission(scope.$index, scope.row)\"\r\n                  style=\"font-size: 12px;text-align: center;color: #66b1ff\">\r\n                  <span>\r\n                    分配权限\r\n                  </span>\r\n                </div>\r\n              </el-dropdown-item>\r\n              <el-dropdown-item style=\"width: inherit;\">\r\n\r\n                <div @click=\"modelAuth(scope.$index, scope.row)\"\r\n                  style=\"font-size: 12px;text-align: center;color: #66b1ff\">\r\n                  <span>\r\n                    目录控制\r\n                  </span>\r\n                </div>\r\n              </el-dropdown-item>\r\n\r\n            </el-dropdown-menu>\r\n          </el-dropdown>\r\n\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n\r\n    <!--编辑角色界面-->\r\n    <el-dialog title=\"编辑角色\"\r\n      :visible.sync=\"editFormVisible\"\r\n      v-if=\"editFormVisible\"\r\n      :close-on-click-modal=\"false\">\r\n      <el-form :model=\"editForm\"\r\n        label-width=\"80px\"\r\n        ref=\"editForm\"\r\n        :rules=\"editFormRules\">\r\n        <el-form-item label=\"名称\"\r\n          prop=\"name\">\r\n          <el-input v-model=\"editForm.name\"\r\n            auto-complete=\"off\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"描述\"\r\n          prop=\"description\">\r\n          <el-input type=\"textarea\"\r\n            :autosize=\"{ minRows: 4, maxRows: 10}\"\r\n            placeholder=\"请添加相关描述\"\r\n            v-model=\"editForm.description\"\r\n            auto-complete=\"off\"></el-input>\r\n        </el-form-item>\r\n\r\n      </el-form>\r\n      <div slot=\"footer\"\r\n        class=\"dialog-footer\">\r\n        <el-button @click.native=\"editFormVisible = false\">取消</el-button>\r\n        <el-button type=\"primary\"\r\n          @click.native=\"editSubmit\"\r\n          :loading=\"editLoading\">提交</el-button>\r\n      </div>\r\n    </el-dialog>\r\n\r\n    <!--新增角色界面-->\r\n    <el-dialog title=\"新建角色\"\r\n      :visible.sync=\"addFormVisible\"\r\n      v-if=\"addFormVisible\"\r\n      :close-on-click-modal=\"false\">\r\n      <el-form :model=\"addForm\"\r\n        label-width=\"80px\"\r\n        ref=\"addForm\"\r\n        :rules=\"addFormRules\">\r\n        <el-form-item label=\"名称\"\r\n          prop=\"name\">\r\n          <el-input v-model=\"addForm.name\"\r\n            auto-complete=\"off\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"描述\"\r\n          prop=\"description\">\r\n          <el-input v-model=\"addForm.description\"\r\n            type=\"textarea\"\r\n            :autosize=\"{ minRows: 4, maxRows: 10}\"\r\n            placeholder=\"请添加相关描述\"\r\n            auto-complete=\"off\"></el-input>\r\n        </el-form-item>\r\n      </el-form>\r\n      <div slot=\"footer\"\r\n        class=\"dialog-footer\">\r\n        <el-button @click.native=\"addFormVisible = false\">取消</el-button>\r\n        <el-button type=\"primary\"\r\n          @click.native=\"addSubmit\"\r\n          :loading=\"addLoading\">提交</el-button>\r\n      </div>\r\n    </el-dialog>\r\n\r\n    <el-dialog title=\"分配权限\"\r\n      :visible.sync=\"permissionVisible\"\r\n      v-if=\"permissionVisible\"\r\n      ref=\"permissionDialog\"\r\n      :close-on-click-modal=\"false\"\r\n      :show-close=\"false\">\r\n      <el-form :model=\"permission\"\r\n        label-width=\"80px\"\r\n        ref=\"permissionForm\">\r\n        <el-tree :data=\"data2\"\r\n          show-checkbox\r\n          node-key=\"authId\"\r\n          ref=\"tree\"\r\n          highlight-current\r\n          :props=\"defaultProps\"\r\n          :default-checked-keys=\"roleTree\">\r\n        </el-tree>\r\n      </el-form>\r\n      <div slot=\"footer\"\r\n        class=\"dialog-footer\">\r\n        <el-button @click.native=\"permissionVisible=false\">取消</el-button>\r\n        <el-button type=\"primary\"\r\n          @click.native=\"permissionSubmit\"\r\n          :loading=\"permissionLoading\">提交</el-button>\r\n      </div>\r\n\r\n    </el-dialog>\r\n\r\n    <el-dialog title=\"目录控制\"\r\n      :visible.sync=\"modelVisible\"\r\n      v-if=\"modelVisible\"\r\n      :close-on-click-modal=\"false\"\r\n      style=\"min-width:1200px;\">\r\n\r\n      <el-form :model=\"directory\"\r\n        label-width=\"100px\"\r\n        ref=\"directoryForm\">\r\n\r\n        <el-tree :data=\"data3\"\r\n          node-key=\"id\"\r\n          ref=\"tree1\"\r\n          highlight-current\r\n          :props=\"defaultProps1\"\r\n          :default-checked-keys=\"modelTree\"\r\n          :default-expand-all=\"true\"\r\n          :expand-on-click-node=\"false\"\r\n          :render-content=\"nodeRender\">\r\n        </el-tree>\r\n\r\n      </el-form>\r\n\r\n      <div slot=\"footer\"\r\n        class=\"dialog-footer\">\r\n        <el-button @click.native=\"modelVisible=false\">取消</el-button>\r\n        <el-button type=\"primary\"\r\n          @click.native=\"modelAuthSubmit\"\r\n          :loading=\"modelLoading\">提交</el-button>\r\n      </div>\r\n\r\n    </el-dialog>\r\n\r\n  </section>\r\n</template>\r\n\r\n<script>\r\nimport util from '../../common/js/util'\r\nconst cityOptions = [9, 10];\r\n// import NProgress from 'nprogress'\r\nexport default {\r\n  data() {\r\n    const validateName = (rule, value, callback) => {\r\n      const re = new RegExp(\"^[ a-zA-Z0-9_\\u4e00-\\u9fa5]+$\");\r\n      console.log(value);\r\n\r\n      if (!value) {\r\n        callback(new Error('请输入角色名称'));\r\n      } else {\r\n        if (re.test(value)) {\r\n          if (value.length > 20) {\r\n            callback(new Error('角色名称不得超过20个字符'));\r\n          } else {\r\n            if (value.trim()) {\r\n              const para = { name: '' };\r\n              para.name = value;\r\n\r\n              this.$http({\r\n                url: '/api/role/nameExist',\r\n                method: 'post',\r\n                data: para\r\n              })\r\n                .then((res) => {\r\n                  this.editLoading = false;\r\n                  if (res.data.flag) {\r\n                    callback(new Error('角色名称重复'));\r\n                  } else {\r\n                    callback();\r\n                  }\r\n\r\n                });\r\n            } else {\r\n              callback(new Error('不能全为空格'));\r\n            }\r\n          }\r\n\r\n\r\n\r\n        } else {\r\n          callback(new Error('只允许输入中文、英文、数字、下划线及空格'));\r\n        }\r\n      }\r\n    };\r\n    const validateName1 = (rule, value, callback) => {\r\n      console.log(this.editForm.name);\r\n      const re = new RegExp(\"^[ a-zA-Z0-9_\\u4e00-\\u9fa5]+$\");\r\n      console.log(value);\r\n\r\n      if (!value) {\r\n        callback(new Error('请输入角色名称'));\r\n      } else {\r\n        if (re.test(value)) {\r\n\r\n          if (value == this.roleName) {\r\n            callback();\r\n          } else {\r\n\r\n            if (value.length > 20) {\r\n              callback(new Error('角色名称不得超过20个字符'));\r\n            } else {\r\n\r\n\r\n              if (value.trim()) {\r\n                const para = { name: '' };\r\n                para.name = value;\r\n\r\n                this.$http({\r\n                  url: '/api/role/nameExist',\r\n                  method: 'post',\r\n                  data: para\r\n                })\r\n                  .then((res) => {\r\n                    this.editLoading = false;\r\n                    if (res.data.flag) {\r\n                      callback(new Error('角色名称重复'));\r\n                    } else {\r\n                      callback();\r\n                    }\r\n\r\n                  });\r\n              } else {\r\n                callback(new Error('不能全为空格'));\r\n              }\r\n\r\n            }\r\n\r\n\r\n          }\r\n\r\n\r\n\r\n        } else {\r\n          callback(new Error('只允许输入中文、字母、数字、下划线及空格'));\r\n        }\r\n      }\r\n    };\r\n    return {\r\n      currentRow: null,\r\n      roleName: '',\r\n      addFormRules: {\r\n        name: [\r\n          { validator: validateName, trigger: 'blur', required: true }\r\n        ],\r\n        description: [\r\n          { max: 120, message: '长度不得超过120个字符', trigger: 'blur' }\r\n        ]\r\n\r\n      },\r\n      editFormRules: {\r\n        name: [\r\n          { validator: validateName1, trigger: 'blur', required: true }\r\n        ],\r\n        description: [\r\n          { max: 120, message: '长度不得超过120个字符', trigger: 'blur' }\r\n        ]\r\n      },\r\n\r\n      data2: [],\r\n      defaultProps: {\r\n        children: 'children',\r\n        label: 'authName'\r\n      },\r\n\r\n      auths: [],\r\n      ids: {\r\n        authIds: [],\r\n        roleId: ''\r\n      },\r\n\r\n      addItem: {\r\n        authName: '',\r\n        authCode: '',\r\n        description: ''\r\n      },\r\n      editItem: {\r\n        authName: '',\r\n        authCode: '',\r\n        description: ''\r\n      },\r\n      groups: [],\r\n\r\n      roles: [],\r\n      listLoading: false,\r\n      sels: [], // 列表选中列\r\n      perCheck: [], // 权限列表选中列\r\n\r\n      editFormVisible: false, // 编辑界面是否显示\r\n      editLoading: false,\r\n      addItemLoading: false,\r\n      addItemVisible: false,\r\n      dialogVisible: false,\r\n      editItemLoading: false,\r\n      editItemVisible: false,\r\n\r\n      permissionVisible: false,\r\n      permissionLoading: false,\r\n\r\n      modelVisible: false,\r\n      modelLoading: false,\r\n      defaultProps1: {\r\n        label: 'name',\r\n        children: 'children'\r\n      },\r\n      data3: [],\r\n      modelTree: [],\r\n      directory: {},\r\n\r\n      // 编辑界面数据\r\n      editForm: {\r\n        //     id: 0,\r\n        name: '',\r\n        description: '',\r\n\r\n      },\r\n      permission: {},\r\n\r\n      addFormVisible: false, // 新增界面是否显示\r\n      addLoading: false,\r\n\r\n      // 新增界面数据\r\n      addForm: {\r\n        name: '',\r\n        description: ''\r\n\r\n      },\r\n      roleTree: []\r\n      ,\r\n    }\r\n  },\r\n  methods: {\r\n\r\n\r\n    nodeRender(h, { node, data, store }) {\r\n      let level;\r\n      if (node.level <= 10) {\r\n        level = node.level;\r\n      } else {\r\n        level = 10;\r\n      }\r\n      const minWidth = level * 18;\r\n\r\n      if (!data.parentId == 0) {\r\n        return (\r\n          <span style=\"width:100%;font-size: 14px; \">\r\n            <span style={{ maxWidth: 200 - minWidth + 'px', minWidth: '100px' }} class=\"spanEllipsis\" title={node.label}>\r\n              <svg class=\"icon\" aria-hidden=\"true\" >\r\n                <use xlinkHref=\"#icon-wenjianjiayigongxiang\"></use>\r\n              </svg>\r\n              {node.label}\r\n            </span>\r\n            <span style=\"margin-right:10px;min-width:250px;position:absolute;right:5%\">\r\n              <el-radio-group v-model={data.mode}>\r\n                <el-radio label={1}>可读</el-radio>\r\n                <el-radio label={2}>读/写</el-radio>\r\n                <el-radio label={3}>完全</el-radio>\r\n              </el-radio-group>\r\n              <el-button size=\"small\" type=\"text\" icon=\"el-icon-close\" on-click={() => this.modeClear(data)} style=\"margin-left:5px;\"></el-button>\r\n            </span>\r\n          </span>\r\n        );\r\n      } else {\r\n        return (\r\n          <span style=\"flex: 1; display: flex; align-items: center; justify-content: space-between; font-size: 14px; padding-right: 8px;\">\r\n            <span>\r\n              <svg class=\"icon\" aria-hidden=\"true\" >\r\n                <use xlinkHref=\"#icon-wenjianjiayigongxiang\"></use>\r\n              </svg>\r\n              <span>{node.label}</span>\r\n            </span>\r\n\r\n          </span>\r\n        );\r\n      }\r\n\r\n\r\n\r\n    },\r\n\r\n\r\n\r\n    modeClear(data) {\r\n      data.mode = 0;\r\n    },\r\n    modelAuth(index, row) {\r\n\r\n\r\n\r\n      this.ids.roleId = row.id;\r\n      this.modelVisible = true;\r\n\r\n      const temp = [];\r\n\r\n      row.directoryAuth.forEach(x => temp.push(x.directory_id));\r\n      this.modelTree = temp;\r\n      this.setMode(this.data3, row.directoryAuth);\r\n      // console.log(this.data3);\r\n      // console.log(row.directoryAuth);\r\n\r\n\r\n    },\r\n\r\n\r\n    selsChange: function (sels) {\r\n      this.sels = sels;\r\n      console.log(sels);\r\n    },\r\n    handleCurrentChange(val) {\r\n      this.currentRow = val;\r\n    },\r\n\r\n    getCheckedNodes() {\r\n      return this.$refs.tree.getCheckedNodes();\r\n    },\r\n    setCheckedNodes(nodes) {\r\n      this.$refs.tree.setCheckedNodes(nodes);\r\n    },\r\n\r\n    getRoles() {\r\n      const _this = this;\r\n      _this.$http.post('/api/role/list')\r\n        .then(function (response) {\r\n          _this.roles = response.data.role;\r\n\r\n\r\n        })\r\n        .catch(function (error) {\r\n          //         console.log(error);\r\n        });\r\n    },\r\n    getGroups() {\r\n      const _this = this;\r\n      _this.$http.post('/api/auth/list')\r\n        .then(function (response) {\r\n          _this.groups = response.data.group;\r\n          _this.data2 = response.data.group;\r\n\r\n\r\n\r\n        })\r\n        .catch(function (error) {\r\n          console.log(error);\r\n        });\r\n    },\r\n\r\n\r\n\r\n    // 删除\r\n    handleDel: function () {\r\n\r\n      if (this.currentRow.id == 1) {\r\n        this.$message({\r\n          message: '管理员角色不允许删除',\r\n          type: 'error'\r\n        });\r\n\r\n      } else {\r\n        this.$confirm('确认删除该角色吗?', '提示', {\r\n          type: 'warning',\r\n          closeOnClickModal: false\r\n        }).then(() => {\r\n          this.listLoading = true;\r\n          const para = { id: this.currentRow.id };\r\n          this.$http({\r\n            url: '/api/role/delete',\r\n            method: 'post',\r\n            data: para\r\n          }).then((res) => {\r\n\r\n            this.listLoading = false;\r\n            // NProgress.done();\r\n            if (res.data.flag) {\r\n              this.$message({\r\n                message: '删除成功',\r\n                type: 'success'\r\n              });\r\n            } else {\r\n              this.$message({\r\n                message: '删除失败',\r\n                type: 'error'\r\n              });\r\n            }\r\n            this.getRoles();\r\n          });\r\n        }).catch(function (error) {\r\n          this.listLoading = false;\r\n          console.log(error);\r\n        });\r\n      }\r\n\r\n\r\n    },\r\n\r\n    modelAuthSubmit() {\r\n\r\n\r\n      const para = { directoryAuth: '', roleId: '' };\r\n      para.directoryAuth = this.data3;\r\n      para.roleId = this.ids.roleId;\r\n\r\n\r\n\r\n      this.$http({        method: 'post',\r\n        url: 'api/DirectoryAuth/roleAdd',\r\n        data: para      }).then((res) => {\r\n        this.addLoading = false;\r\n        if (res.data.flag) {\r\n          this.$message({\r\n            message: res.data.msg,\r\n            type: 'success'\r\n          });\r\n        } else {\r\n          this.$message({\r\n            message: res.data.msg,\r\n            type: 'error'\r\n          });\r\n\r\n        }\r\n\r\n        this.modelVisible = false;\r\n        this.getRoles();\r\n      }).catch(function (error) {\r\n        this.addLoading = false;\r\n        console.log(error);\r\n      });\r\n\r\n\r\n\r\n    },\r\n    setMode(data3, directoryAuth) {\r\n      for (const a of data3) {\r\n\r\n        let f = false;\r\n\r\n        for (const b of directoryAuth) {\r\n          if (a.id == b.directory_id) {\r\n            f = true;\r\n            if (b.mode > 0) {\r\n              a.mode = b.mode;\r\n            } else {\r\n              a.mode = 0;\r\n            }\r\n          }\r\n        }\r\n        if (!f) {\r\n          a.mode = 0;\r\n        }\r\n        if (a.children) {\r\n          this.setMode(a.children, directoryAuth);\r\n        }\r\n      }\r\n    },\r\n\r\n    getDirectoryTree() {\r\n\r\n      const _this = this;\r\n      _this.$http.post('api/directory/getDirectoryTree')\r\n        .then(function (response) {\r\n\r\n          _this.data3 = response.data.directoryTree;\r\n\r\n        })\r\n        .catch(function (error) {\r\n          console.log(error);\r\n        });\r\n    },\r\n\r\n    // 显示编辑界面\r\n    handleEdit: function () {\r\n      this.editFormVisible = true;\r\n      this.roleName = this.currentRow.name;\r\n      this.editForm = Object.assign({}, this.currentRow);\r\n\r\n\r\n    },\r\n\r\n    // 显示新增界面\r\n    handleAdd: function () {\r\n      this.addFormVisible = true;\r\n      this.addForm = {\r\n        name: '',\r\n        description: ''\r\n\r\n      };\r\n    },\r\n\r\n    handlePermission(index, row) {\r\n\r\n      this.ids.roleId = row.id;\r\n      this.permissionVisible = true;\r\n\r\n      const temp = [];\r\n\r\n      row.auths.forEach(x => temp.push(x.auth_id));\r\n      this.roleTree = temp;\r\n      //   this.setCheckedNodes(row.permissions);\r\n\r\n    },\r\n    // 编辑\r\n    editSubmit: function () {\r\n      this.$refs.editForm.validate((valid) => {\r\n        if (valid) {\r\n\r\n          this.editLoading = true;\r\n          const para = Object.assign({}, this.editForm);\r\n\r\n          this.$http({\r\n            url: '/api/role/edit',\r\n            method: 'post',\r\n            data: para\r\n          })\r\n            .then((res) => {\r\n              this.editLoading = false;\r\n              if (res.data.flag) {\r\n                this.$message({\r\n                  message: '编辑成功',\r\n                  type: 'success'\r\n                });\r\n              } else {\r\n                this.$message({\r\n                  message: '编辑失败',\r\n                  type: 'error'\r\n                });\r\n              }\r\n\r\n              this.$refs.editForm.resetFields();\r\n              this.editFormVisible = false;\r\n              this.getRoles();\r\n            }).catch(function (error) {\r\n              this.editLoading = false;\r\n              console.log(error);\r\n            });\r\n        }\r\n      });\r\n    },\r\n    permissionSubmit: function () {\r\n\r\n\r\n      this.$refs.permissionForm.validate((valid) => {\r\n        if (valid) {\r\n\r\n          this.permissionLoading = true;\r\n\r\n          this.ids.authIds = this.getCheckedNodes();\r\n          const para = Object.assign({}, this.ids);\r\n\r\n          this.$http({\r\n            url: '/api/role/assign',\r\n            method: 'post',\r\n            data: para\r\n          })\r\n            .then((res) => {\r\n              this.permissionLoading = false;\r\n              if (res.data.flag) {\r\n                this.$message({\r\n                  message: '编辑成功',\r\n                  type: 'success'\r\n                });\r\n              } else {\r\n                this.$message({\r\n                  message: '编辑失败',\r\n                  type: 'error'\r\n                });\r\n              }\r\n              this.$refs.permissionForm.resetFields();\r\n              this.permissionVisible = false;\r\n              this.getGroups();\r\n              this.getRoles();\r\n            }).catch(function (error) {\r\n              this.permissionLoading = false;\r\n              console.log(error);\r\n            });\r\n\r\n        }\r\n      });\r\n    },\r\n    // 新增\r\n    addSubmit: function () {\r\n      this.$refs.addForm.validate((valid) => {\r\n        if (valid) {\r\n\r\n          this.addLoading = true;\r\n          // NProgress.start();\r\n          const para = Object.assign({}, this.addForm);\r\n\r\n          this.$http({            method: 'post',\r\n            url: 'api/role/add',\r\n            data: para          }).then((res) => {\r\n            this.addLoading = false;\r\n            // NProgress.done();\r\n            if (res.data.flag) {\r\n              this.$message({\r\n                message: res.data.msg,\r\n                type: 'success'\r\n              });\r\n            } else {\r\n              this.$message({\r\n                message: res.data.msg,\r\n                type: 'error'\r\n              });\r\n\r\n            }\r\n            this.$refs.addForm.resetFields();\r\n            this.addFormVisible = false;\r\n            this.getRoles();\r\n          });\r\n\r\n        }\r\n      });\r\n    },\r\n    dateFormatter: function (row, column) {\r\n      if (row.createDate != null) {\r\n        return util.formatDate.format(new Date(row.createDate), 'yyyy-MM-dd ')\r\n      }\r\n\r\n\r\n\r\n    },\r\n  },\r\n  mounted() {\r\n    this.getRoles();\r\n    this.getGroups();\r\n    this.getDirectoryTree();\r\n\r\n  }\r\n}\r\n\r\n\r\n\r\n</script>\r\n\r\n\r\n<style>\r\n.demo-table-expand {\r\n  font-size: 0;\r\n}\r\n.demo-table-expand label {\r\n  width: 120px;\r\n  color: #99a9bf;\r\n}\r\n.demo-table-expand .el-form-item {\r\n  margin-right: 0;\r\n  margin-bottom: 0;\r\n  width: 20%;\r\n}\r\n.role-view {\r\n  display: flex;\r\n  flex-direction: column;\r\n\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./role.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./role.vue?vue&type=script&lang=js\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('section',{staticClass:\"role-view\"},[_c('el-form',{staticStyle:{\"height\":\"50px\"},attrs:{\"inline\":true}},[_c('el-form-item',[_c('el-button',{attrs:{\"size\":\"small\",\"type\":\"primary\"},on:{\"click\":_vm.handleAdd}},[_vm._v(\"新建\\n         \"),_c('i',{staticClass:\"el-icon-plus el-icon--right\"})]),_vm._v(\" \"),_c('el-button',{attrs:{\"size\":\"small\",\"disabled\":this.currentRow===null},on:{\"click\":_vm.handleEdit}},[_vm._v(\"编辑\\n         \"),_c('i',{staticClass:\"el-icon-edit el-icon--right\"})]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"danger\",\"size\":\"small\",\"disabled\":this.currentRow===null},on:{\"click\":_vm.handleDel}},[_vm._v(\"删除\\n         \"),_c('i',{staticClass:\"el-icon-delete el-icon--right\"})])],1)],1),_vm._v(\" \"),_c('hr'),_vm._v(\" \"),_c('el-table',{staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.roles,\"highlight-current-row\":\"\",\"height\":\"100%\"},on:{\"current-change\":_vm.handleCurrentChange}},[_c('el-table-column',{attrs:{\"type\":\"index\",\"width\":\"60\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"name\",\"label\":\"名称\",\"min-width\":\"120\",\"sortable\":\"\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('span',{staticClass:\"tableEllipsis\",staticStyle:{\"min-width\":\"120px\"},attrs:{\"title\":scope.row.name}},[_vm._v(_vm._s(scope.row.name))])]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"createDate\",\"label\":\"创建时间\",\"min-width\":\"160\",\"sortable\":\"\",\"formatter\":_vm.dateFormatter}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"description\",\"label\":\"描述\",\"min-width\":\"160\",\"sortable\":\"\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('span',{staticClass:\"tableEllipsis\",staticStyle:{\"min-width\":\"160px\"},attrs:{\"title\":scope.row.description}},[_vm._v(_vm._s(scope.row.description))])]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"操作\",\"width\":\"200\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-dropdown',[_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"small\"}},[_vm._v(\"\\n             选项\\n             \"),_c('i',{staticClass:\"el-icon-caret-bottom el-icon--right\"})]),_vm._v(\" \"),_c('el-dropdown-menu',{attrs:{\"slot\":\"dropdown\"},slot:\"dropdown\"},[_c('el-dropdown-item',{staticStyle:{\"width\":\"inherit\"}},[_c('div',{staticStyle:{\"font-size\":\"12px\",\"text-align\":\"center\",\"color\":\"#66b1ff\"},on:{\"click\":function($event){_vm.handlePermission(scope.$index, scope.row)}}},[_c('span',[_vm._v(\"\\n                   分配权限\\n                 \")])])]),_vm._v(\" \"),_c('el-dropdown-item',{staticStyle:{\"width\":\"inherit\"}},[_c('div',{staticStyle:{\"font-size\":\"12px\",\"text-align\":\"center\",\"color\":\"#66b1ff\"},on:{\"click\":function($event){_vm.modelAuth(scope.$index, scope.row)}}},[_c('span',[_vm._v(\"\\n                   目录控制\\n                 \")])])])],1)],1)]}}])})],1),_vm._v(\" \"),(_vm.editFormVisible)?_c('el-dialog',{attrs:{\"title\":\"编辑角色\",\"visible\":_vm.editFormVisible,\"close-on-click-modal\":false},on:{\"update:visible\":function($event){_vm.editFormVisible=$event}}},[_c('el-form',{ref:\"editForm\",attrs:{\"model\":_vm.editForm,\"label-width\":\"80px\",\"rules\":_vm.editFormRules}},[_c('el-form-item',{attrs:{\"label\":\"名称\",\"prop\":\"name\"}},[_c('el-input',{attrs:{\"auto-complete\":\"off\"},model:{value:(_vm.editForm.name),callback:function ($$v) {_vm.$set(_vm.editForm, \"name\", $$v)},expression:\"editForm.name\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"描述\",\"prop\":\"description\"}},[_c('el-input',{attrs:{\"type\":\"textarea\",\"autosize\":{ minRows: 4, maxRows: 10},\"placeholder\":\"请添加相关描述\",\"auto-complete\":\"off\"},model:{value:(_vm.editForm.description),callback:function ($$v) {_vm.$set(_vm.editForm, \"description\", $$v)},expression:\"editForm.description\"}})],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{nativeOn:{\"click\":function($event){_vm.editFormVisible = false}}},[_vm._v(\"取消\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\",\"loading\":_vm.editLoading},nativeOn:{\"click\":function($event){return _vm.editSubmit($event)}}},[_vm._v(\"提交\")])],1)],1):_vm._e(),_vm._v(\" \"),(_vm.addFormVisible)?_c('el-dialog',{attrs:{\"title\":\"新建角色\",\"visible\":_vm.addFormVisible,\"close-on-click-modal\":false},on:{\"update:visible\":function($event){_vm.addFormVisible=$event}}},[_c('el-form',{ref:\"addForm\",attrs:{\"model\":_vm.addForm,\"label-width\":\"80px\",\"rules\":_vm.addFormRules}},[_c('el-form-item',{attrs:{\"label\":\"名称\",\"prop\":\"name\"}},[_c('el-input',{attrs:{\"auto-complete\":\"off\"},model:{value:(_vm.addForm.name),callback:function ($$v) {_vm.$set(_vm.addForm, \"name\", $$v)},expression:\"addForm.name\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"描述\",\"prop\":\"description\"}},[_c('el-input',{attrs:{\"type\":\"textarea\",\"autosize\":{ minRows: 4, maxRows: 10},\"placeholder\":\"请添加相关描述\",\"auto-complete\":\"off\"},model:{value:(_vm.addForm.description),callback:function ($$v) {_vm.$set(_vm.addForm, \"description\", $$v)},expression:\"addForm.description\"}})],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{nativeOn:{\"click\":function($event){_vm.addFormVisible = false}}},[_vm._v(\"取消\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\",\"loading\":_vm.addLoading},nativeOn:{\"click\":function($event){return _vm.addSubmit($event)}}},[_vm._v(\"提交\")])],1)],1):_vm._e(),_vm._v(\" \"),(_vm.permissionVisible)?_c('el-dialog',{ref:\"permissionDialog\",attrs:{\"title\":\"分配权限\",\"visible\":_vm.permissionVisible,\"close-on-click-modal\":false,\"show-close\":false},on:{\"update:visible\":function($event){_vm.permissionVisible=$event}}},[_c('el-form',{ref:\"permissionForm\",attrs:{\"model\":_vm.permission,\"label-width\":\"80px\"}},[_c('el-tree',{ref:\"tree\",attrs:{\"data\":_vm.data2,\"show-checkbox\":\"\",\"node-key\":\"authId\",\"highlight-current\":\"\",\"props\":_vm.defaultProps,\"default-checked-keys\":_vm.roleTree}})],1),_vm._v(\" \"),_c('div',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{nativeOn:{\"click\":function($event){_vm.permissionVisible=false}}},[_vm._v(\"取消\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\",\"loading\":_vm.permissionLoading},nativeOn:{\"click\":function($event){return _vm.permissionSubmit($event)}}},[_vm._v(\"提交\")])],1)],1):_vm._e(),_vm._v(\" \"),(_vm.modelVisible)?_c('el-dialog',{staticStyle:{\"min-width\":\"1200px\"},attrs:{\"title\":\"目录控制\",\"visible\":_vm.modelVisible,\"close-on-click-modal\":false},on:{\"update:visible\":function($event){_vm.modelVisible=$event}}},[_c('el-form',{ref:\"directoryForm\",attrs:{\"model\":_vm.directory,\"label-width\":\"100px\"}},[_c('el-tree',{ref:\"tree1\",attrs:{\"data\":_vm.data3,\"node-key\":\"id\",\"highlight-current\":\"\",\"props\":_vm.defaultProps1,\"default-checked-keys\":_vm.modelTree,\"default-expand-all\":true,\"expand-on-click-node\":false,\"render-content\":_vm.nodeRender}})],1),_vm._v(\" \"),_c('div',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{nativeOn:{\"click\":function($event){_vm.modelVisible=false}}},[_vm._v(\"取消\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\",\"loading\":_vm.modelLoading},nativeOn:{\"click\":function($event){return _vm.modelAuthSubmit($event)}}},[_vm._v(\"提交\")])],1)],1):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../node_modules/css-loader/index.js!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/lib/index.js!../../../node_modules/sass-loader/lib/loader.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./role.vue?vue&type=style&index=0&lang=css\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../node_modules/css-loader/index.js!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/lib/index.js!../../../node_modules/sass-loader/lib/loader.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./role.vue?vue&type=style&index=0&lang=css\""],"sourceRoot":""}